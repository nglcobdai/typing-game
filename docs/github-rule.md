# Issue 駆動開発

新機能や仕様変更、バグの修正等でコードを変更する際は必ず事前に Issue を作成する。

1 つの Issue に対して 1 つのブランチ, プルリクエストを作成する。

また、基本的にはタスクの管理をすべて Issue で行うため、直接的にプログラミングを必要としないタスクに関しても Issue を作成して良い。


# ブランチ

## ブランチの種類

開発で使用するブランチの種類は以下の通りである。

- main：プロダクトとしてリリースするためのブランチ
- develop：開発ブランチ。コードが安定しリリース準備ができたら main へマージする。このブランチが最新バージョンとなる。
- feature：機能を追加するためのブランチ。 develop から分岐し develop にプルリクエストし、マージする。仕様変更やリファクタリングもこのブランチ。
- hotfix：バグの修正など、プロダクトの動作に影響する問題を解決するためのブランチ。 develop から分岐し、 develop にプルリクエストし、マージする。

```
💡 基本的に main ブランチと develop ブランチでは一切の操作を行わない。何らかの変更を行う場合は必ずイシューを作成し、ブランチを生やす。
```

## フォーマット

feature ブランチと hotfix ブランチは以下のフォーマットで命名を行う。

なお、ブランチ名はスネークケース（アンダーバーつなぎの全て小文字）で命名を行う。

```
feature/${Issue の番号}_${Issue のタイトル}
hotfix/${Issue の番号}_${Issue のタイトル}
```

```
例）
feature/1_set_up_dev_environment
feature/47_create_model
hotfix/139_fix_layout
```

# コミットメッセージ

## フォーマット

コミットメッセージは以下のフォーマットで記述する。

(1 行目は必須だが、2, 3 行目は必須ではない)

```tsx
${prefix}: ${どう変更したか}
${空行}
${その変更を行った理由}
```

```
例）
refactor: ボタンを別コンポーネントに切り出した

可読性を高めるため
```

## prefix

コミットメッセージには prefix を付ける。

prefix は [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) に従い [Semantic PRs](https://github.com/apps/semantic-prs) を使用する。

prefix の種類は以下の通りである。

| 【${prefix}】 | 【用途】                 |
| ------------- | ------------------------ |
| feat          | 新しい機能               |
| fix           | バグの修正               |
| docs          | ドキュメントの変更       |
| style         | 見た目 (CSS etc…) の変更 |
| refactor      | リファクタリング         |
| perf          | パフォーマンスの向上     |
| test          | テスト関連               |
| chore         | ビルドやライブラリ関連   |

# マージ可能条件

全てのプルリクエストは以下の条件を満たせばマージ可能とする。

- セルフレビューが完了している
- CI がすべて通っている (Semantic PR etc…)
- Approve が一定数以上 (今回だと 1)

# だれがマージするか

PR 作成者がマージする。

# ドラフト (Draft) の使用

Review を受けたあと再度作業をする場合は、PR を一旦 Draft に変更して作業を行う

# プルリクエストの大きさ

1 つのプルリクエストで変更できるコードの最大量は 300 行を基準とする。

これを超えそうな場合は Issue の切り分け方が適切でない可能性が高いため、複数の Issue に切り分けられないか考える。
